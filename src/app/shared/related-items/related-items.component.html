<div *ngIf="get_field_names()?.length > 0 && records && records.length > 0">
  <!--<div *ngIf="get_field_names().length > 0 specimenList?.hits.total > 0">&ndash;&gt;-->

  <hr>
  <h3>
    Related {{capitalizeFirstLetter(target_type)}}s
    <button type="button" class="btn btn-success" (click)="downloadAllFiles()" [disabled]="disableButton()" *ngIf="showButton()">Download all files ({{getUrlsLength()}})</button>
  </h3>
  <table class="table table-striped table-hover table-responsive">
    <thead>
    <tr>
      <ng-container *ngFor="let field of get_field_names()">
        <th>{{field}}</th>
      </ng-container>
      <th *ngIf="download_key.length>0">
        <mat-checkbox (change)="mainCheckboxClicked()" [indeterminate]="mainCheckboxChecked() == 1"
                      [checked]="mainCheckboxChecked() == 2">Download</mat-checkbox>
<!--        <input type="checkbox" [checked]="mainCheckboxChecked() == 2" (click)="mainCheckboxClicked()">-->
      </th>
    </tr>
    </thead>
    <tbody>
    <ng-container *ngFor="let record of records |  paginate: { itemsPerPage: 10, currentPage: p, id: target_type }">
      <tr>
      <ng-container *ngFor="let attr of get_field_values()">
        <td>
          <span *ngIf="get_field_values_for_links(attr) && get_field_values_for_links(attr).length>0; else plainBlock">
            <app-robust-link [prefix]="get_field_values_for_links(attr)[0]"
                             [link]="record[get_field_values_for_links(attr)[1]]"
                             [text]="record[attr]">
            </app-robust-link>
          </span>
          <ng-template #plainBlock>
            {{getValue(record, attr)}}
          </ng-template>
        </td>
      </ng-container>
        <td *ngIf="download_key.length>0">
<!--          <mat-checkbox (change)="onCheckboxClick(record[download_key])"-->
<!--                        [checked]="CheckboxChecked(record[download_key])"></mat-checkbox>-->
          <input type="checkbox" (click)="onCheckboxClick(record[download_key])"
                 [checked]="CheckboxChecked(record[download_key])">
        </td>
      </tr>
    </ng-container>
    </tbody>
  </table>
  <pagination-controls (pageChange)="p = $event" [id]="target_type" ></pagination-controls>
</div>
