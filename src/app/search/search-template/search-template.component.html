<div class="panel panel-default" *ngIf="hits">
  <div class="panel-heading">
    <h4 class="panel-title text-center" (click)="toggleDisplay()">
      {{ hits?.total }} matching {{entity}}{{hits?.total == 1 ? '' : 's' }}
      <ng-container>
        <span *ngIf="!display" class="glyphicon glyphicon glyphicon-collapse-down" aria-hidden="true"></span>
        <span *ngIf="display" class="glyphicon glyphicon glyphicon-collapse-up" aria-hidden="true"></span>
      </ng-container>
    </h4>
  </div>

  <div style="max-height: 200px; overflow: auto;">
    <table class="table table-striped table-hover table-responsive" *ngIf="display">
      <ng-container [ngSwitch]="entity">
        <ng-template ngSwitchCase="organism">
          <thead>
          <tr>
            <th>BioSample ID</th>
            <th>Name</th>
            <th>Sex</th>
            <th>Species</th>
            <th>Breed</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let hit of hits?.hits" class="clickable" [routerLink]="['/organism', hit._id]">
            <td><a>{{hit._id}}</a></td>
            <td><a>{{hit?._source?.name}}</a></td>
            <td>{{hit?._source?.sex?.text}}</td>
            <td>{{hit?._source?.organism?.text}}</td>
            <td>{{hit?._source?.breed?.text}}</td>
          </tr>
          </tbody>
        </ng-template>
        <ng-template ngSwitchCase="specimen">
          <thead>
          <tr>
            <th>BioSample ID</th>
            <th>Name</th>
            <th>Organism part</th>
            <th>Sex</th>
            <th>Species</th>
            <th>Breed</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let hit of hits?.hits" class="clickable" [routerLink]="['/specimen', hit?._id]">
            <td><a>{{hit?._id}}</a></td>
            <td><a>{{hit?._source?.name}}</a></td>
            <td>{{getCellType(hit)}}</td>
            <td>{{hit?._source?.organism?.sex?.text}}</td>
            <td>{{hit?._source?.organism?.organism?.text}}</td>
            <td>{{hit?._source?.organism?.breed?.text}}</td>
          </tr>
          </tbody>
        </ng-template>
        <ng-template ngSwitchCase="file">
          <thead>
          <tr>
            <th>File ID</th>
            <th>Study</th>
            <th>Experiment</th>
            <th>Species</th>
            <th>Specimen</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let hit of hits?.hits" class="clickable" [routerLink]="['/file', hit._id]">
            <td><a>{{hit._id}}</a></td>
            <td>{{hit?._source?.study?.accession}}</td>
            <td>{{hit?._source?.experiment?.accession}}</td>
            <td>{{hit?._source?.species?.text}}</td>
            <td>{{hit?._source?.specimen}}</td>
          </tr>
          </tbody>
        </ng-template>
        <ng-template ngSwitchCase="dataset">
          <thead>
          <tr>
            <th>Dataset ID</th>
            <th>Title</th>
            <th>Species</th>
            <th>Archive</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let hit of hits?.hits" class="clickable" [routerLink]="['/dataset', hit._id]">
            <td><a>{{hit._id}}</a></td>
            <td>{{hit?._source?.title}}</td>
            <td>{{convertArrayToStr(hit?._source?.species,"text")}}</td>
            <td>{{convertArrayToStr(hit?._source?.archive,"")}}</td>
          </tr>
          </tbody>
        </ng-template>
      </ng-container>
    </table>
  </div>
</div>
