<ng-container *ngIf="setting">
  <div class="container" style="min-height:87vh">
    <app-header></app-header>
    <div class="row first-row" *ngIf="_userService.token">
      <div class="col-md-12">
        <div class="alert alert-info" role="alert">
          <p>
            You are logged in as {{ _userService.username }}. <br>
            Token Expires: {{ _userService.token_expires }}
          </p>
          <button (click)="_userService.refreshToken()" class="btn btn-primary">Refresh Token</button>&nbsp;
          <button (click)="logout()" class="btn btn-primary">Log Out</button>
        </div>
      </div>
    </div>
    <div class="row first-row">
      <div class="col-md-6">
        <img src="{{setting.image.url}}"  alt="Project Logo"
             [ngClass]="{'small-project-logo':project==='AQUA-FAANG', 'large-project-logo':project!=='AQUA-FAANG'}">
        <h3>
          <a href="{{setting.url}}">{{setting.url}}</a>
        </h3>
      </div>
      <div class="col-md-6 text-center">
        <img src="https://raw.githubusercontent.com/FAANG/comm-data-portal-projects/master/projects/bovreg/funding-logo-1.jpg" alt="Funding Logo" class="funding-logo">
      </div>
    </div>

    <div class="row" *ngIf="!_userService.token && project === 'BovReg'">
      <div class="col-md-4">
        <button type="button" class="btn btn-success" (click)="login()">Login to BovReg Portal</button>
      </div>
    </div>


    <div class="row first-row">
      <div class="col-md-4">
        <h5>
          {{setting.description}}
        </h5>
      </div>
      <div class="col-md-8 text-center">
        <a class="twitter-timeline" href="https://twitter.com/{{setting.tweeter.id}}?ref_src=twsrc%5Etfw"
           data-height="300"
           data-theme="light"
           data-width="650"
           data-chrome="noborders nofooter noscrollbar transparent"
        >
          Tweets by {{setting.tweeter.id}}
        </a>
        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
      </div>
    </div>

    <div class="row first-row">
      <button *ngIf="relatedItemsCount['Organisms'] > 0" type="button" class="btn btn-info" aria-label="Left Align" (click)="setTableType('Organisms')"
        [ngClass]="{'active': tableType == 'Organisms'}" style="margin-right: 10px;">
        Organisms <i class="material-icons float-right">{{tableType == 'Organisms' ? 'home' : 'menu'}}</i>
      </button>
      <button *ngIf="relatedItemsCount['Specimens'] > 0" type="button" class="btn btn-info" aria-label="Left Align" (click)="setTableType('Specimens')"
        [ngClass]="{'active': tableType == 'Specimens'}" style="margin-right: 10px;">
        Specimens <i class="material-icons float-right">{{tableType == 'Specimens' ? 'home' : 'menu'}}</i>
      </button>
      <button *ngIf="relatedItemsCount['Publications'] > 0" type="button" class="btn btn-info" aria-label="Left Align" (click)="setTableType('Publications')"
        [ngClass]="{'active': tableType == 'Publications'}" style="margin-right: 10px;">
        Publications <i class="material-icons float-right">{{tableType == 'Publications' ? 'home' : 'menu'}}</i>
      </button>
      <button *ngIf="relatedItemsCount['Files'] > 0" type="button" class="btn btn-info" aria-label="Left Align" (click)="setTableType('Files')"
        [ngClass]="{'active': tableType == 'Files'}" style="margin-right: 10px;">
        Files <i class="material-icons float-right">{{tableType == 'Files' ? 'home' : 'menu'}}</i>
      </button>
    </div>

    <ng-container [ngSwitch]="tableType">
      <app-related-items #relatedItemsComp *ngSwitchCase="'Publications'" source_type="project" target_type="publication" 
                        download_key="" [record_id]="project"></app-related-items>
      <app-related-items #relatedItemsComp *ngSwitchCase="'Organisms'" source_type="project" target_type="organism" 
                        download_key="" [record_id]="project"></app-related-items>
      <app-related-items #relatedItemsComp *ngSwitchCase="'Specimens'" source_type="project" target_type="specimen" 
                        download_key="" [record_id]="project"></app-related-items>
      <app-related-items #relatedItemsComp *ngSwitchCase="'Files'" source_type="project" target_type="file" 
                        download_key="url" [record_id]="project"></app-related-items>
    </ng-container>
  </div>
</ng-container>
